<main class="flex-col">
    <div class="flex-col container">
        <mat-card>
            <mat-card-header>
                <mat-card-title>Currency Converter</mat-card-title>
                <mat-card-subtitle>Select a currency to convert to and from then enter a value to be converted
                </mat-card-subtitle>
            </mat-card-header>
            <mat-card-content class="currencyFormContainer">
                <div class="flex-row currencyFormRow">
                    @if (currencies && currencies.length > 0) {
                        <app-single-currency-form [currencies]="currencies"
                                                  (formChange)="setFromValue($event)"></app-single-currency-form>
                        <mat-icon>arrow_forward</mat-icon>
                        <app-single-currency-form [currencies]="currencies" [setAmount]="responseValue"
                                                  [readOnlyAmount]="true"
                                                  (formChange)="setToValue($event)"></app-single-currency-form>
                    } @else if (error) {
                        <p>{{ error }}</p>
                    } @else {
                        <mat-progress-spinner mode="indeterminate"></mat-progress-spinner>
                    }
                </div>

                @if (this.currencyConversionHistory.length > 0) {
                    <div class="flex-col">
                        @for (item of this.currencyConversionHistory; track $index) {
                            <div class="flex-row " style="width: 100%; gap: 1rem">
                                <div class="flex-row">
                                    <b>{{ item.fromCurrency }}</b>: <p
                                        style="margin: 0">{{ item.fromNumerical }}</p>
                                </div>
                                <div class="flex-row">
                                    <b>{{ item.toCurrency }}</b>: <p style="margin: 0">{{ item.toNumerical }}</p>
                                </div>
                            </div>

                        }
                    </div>
                }
            </mat-card-content>
        </mat-card>
    </div>
</main>
